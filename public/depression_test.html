<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <!-- Inter Font -->
     
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>


<style>
/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-500:oklch(63.7% .237 25.331);--color-yellow-100:oklch(97.3% .071 103.193);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-700:oklch(55.4% .135 66.442);--spacing:.25rem;--container-sm:24rem;--container-2xl:42rem;--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height:calc(2.25/1.875);--font-weight-bold:700;--tracking-wider:.05em;--animate-bounce:bounce 1s infinite;--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab, red, red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.sr-only{clip-path:inset(50%);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.fixed{position:fixed}.top-5{top:calc(var(--spacing)*5)}.right-5{right:calc(var(--spacing)*5)}.left-5{left:calc(var(--spacing)*5)}.z-50{z-index:50}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.mx-auto{margin-inline:auto}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-\[10vh\]{margin-top:10vh}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.ml-1{margin-left:calc(var(--spacing)*1)}.flex{display:flex}.hidden{display:none}.h-16{height:calc(var(--spacing)*16)}.w-16{width:calc(var(--spacing)*16)}.w-100{width:calc(var(--spacing)*100)}.w-auto{width:auto}.w-full{width:100%}.max-w-2xl{max-width:var(--container-2xl)}.max-w-sm{max-width:var(--container-sm)}.min-w-min{min-width:min-content}.animate-bounce{animation:var(--animate-bounce)}.flex-col{flex-direction:column}.justify-between{justify-content:space-between}.gap-6{gap:calc(var(--spacing)*6)}.self-center{align-self:center}.rounded{border-radius:.25rem}.rounded-\(--border-radius\){border-radius:var(--border-radius)}.border{border-style:var(--tw-border-style);border-width:1px}.border-b-8{border-bottom-style:var(--tw-border-style);border-bottom-width:8px}.border-\(--input-border\),.border-\[var\(--input-border\)\]{border-color:var(--input-border)}.border-yellow-400{border-color:var(--color-yellow-400)}.bg-\(--input-bg\),.bg-\[var\(--input-bg\)\]{background-color:var(--input-bg)}.bg-yellow-100{background-color:var(--color-yellow-100)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.text-center{text-align:center}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.text-\(--accent-color\){color:var(--accent-color)}.text-\[var\(--text-color\)\]{color:var(--text-color)}.text-red-500{color:var(--color-red-500)}.text-yellow-700{color:var(--color-yellow-700)}.uppercase{text-transform:uppercase}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-80{opacity:.8}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}@media (min-width:48rem){.md\:text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}}}:root{--font-family:"Inter",sans-serif;--border-radius:10px;--transition-speed:.28s;--bg-color:#121212;--text-color:#e0e0e0;--sidebar-bg:#1e1e1e;--sidebar-border:#333;--input-bg:#2c2c2c;--input-border:#444;--input-text:#e0e0e0;--button-bg:#333;--button-text:#e0e0e0;--accent-color:#3b82f6;--shadow-color:#00000038}body.light{--bg-color:#f4f4f5;--text-color:#18181b;--sidebar-bg:#fff;--sidebar-border:#e4e4e7;--input-bg:#fff;--input-border:#d4d4d8;--input-text:#18181b;--button-bg:#e4e4e7;--button-text:#18181b;--accent-color:#2563eb;--shadow-color:#0000001a}body{background-color:var(--bg-color);color:var(--text-color);font-family:var(--font-family);transition:background-color var(--transition-speed),color var(--transition-speed);flex-direction:column;align-items:center;min-height:100vh;padding:20px;display:flex}.card{background-color:var(--sidebar-bg);border:1px solid var(--sidebar-border);border-radius:var(--border-radius);box-shadow:0 4px 6px var(--shadow-color);width:100%;max-width:600px;transition:all var(--transition-speed);padding:2rem}h1,h2,h3{margin-bottom:1rem;font-weight:600}.form-group{margin-bottom:1.5rem}label{opacity:.9;margin-bottom:.5rem;font-size:.9rem;font-weight:500;display:block}input[type=text],input[type=number],select{background-color:var(--input-bg);border:1px solid var(--input-border);width:100%;color:var(--input-text);border-radius:var(--border-radius);transition:border-color var(--transition-speed);box-sizing:border-box;outline:none;padding:.75rem}input:focus,select:focus{border-color:var(--accent-color)}.btn{background-color:var(--accent-color);color:#fff;border-radius:var(--border-radius);cursor:pointer;border:none;padding:.75rem 1.5rem;font-weight:500;transition:opacity .2s}.btn:hover{opacity:.9}.btn-secondary{background-color:var(--button-bg);color:var(--button-text)}.option-label{background-color:var(--input-bg);border:1px solid var(--input-border);border-radius:var(--border-radius);cursor:pointer;align-items:center;margin-bottom:.75rem;padding:1rem;transition:all .2s;display:flex}.option-label:hover{border-color:var(--accent-color)}.option-label input[type=radio]{accent-color:var(--accent-color);margin-right:1rem;transform:scale(1.2)}.option-label.selected{border-color:var(--accent-color);background-color:#3b82f61a}.progress-container{background-color:var(--input-border);border-radius:999px;width:100%;height:6px;margin-bottom:2rem;overflow:hidden}.progress-bar{background-color:var(--accent-color);height:100%;transition:width .3s}.hidden{display:none}.fade-in{animation:.4s ease-in-out fadeIn}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.theme-toggle{background:var(--sidebar-bg);border:1px solid var(--sidebar-border);color:var(--text-color);cursor:pointer;box-shadow:0 2px 10px var(--shadow-color);z-index:50;border-radius:50%;padding:10px;position:fixed;top:20px;right:20px}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@keyframes bounce{0%,to{animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}
</style>
</head>
<body>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle Theme">
        <i data-lucide="sun" class="hidden" id="sunIcon"></i>
        <i data-lucide="moon" id="moonIcon"></i>
    </button>

    <div class="w-full max-w-2xl flex flex-col gap-6 mt-[10vh]" id="app">
        
        <!-- STEP 1: INTRO & USER DETAILS -->
        <div id="step-intro" class="card self-center fade-in">
            <h1 class="text-2xl md:text-3xl text-center" id="testTitle">Loading...</h1>
            <p class="text-center opacity-80 mb-8" id="testInstruction"></p>
            
            <form id="userForm">
                <div id="dynamicFields"></div>
                <button type="submit" class="btn w-full mt-4">Start Assessment</button>
            </form>
        </div>

        <!-- STEP 2: QUESTIONS -->
        <div id="step-quiz" class="card hidden">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            
            <div id="questionContainer" class="fade-in">
                <!-- Content injected by JS -->
            </div>

            <div class="flex justify-between mt-6">
                <button id="prevBtn" class="btn btn-secondary w-auto hidden">Previous</button>
                <!-- Spacer if prev hidden -->
                <div id="spacer"></div> 
                <button id="nextBtn" class="btn w-auto">Next</button>
            </div>
        </div>

        <!-- STEP 3: RESULTS -->
        <div id="step-result" class="card hidden fade-in text-center">
            <div class="mb-6">
                <i data-lucide="activity" class="w-16 h-16 mx-auto text-(--accent-color) mb-4"></i>
                <h2 class="text-3xl">Assessment Complete</h2>
            </div>
            
            <div class="bg-(--input-bg) p-6 rounded-(--border-radius) border border-(--input-border) mb-6">
                <p class="text-sm opacity-70 uppercase tracking-wider mb-2">Your Result</p>
                <h3 class="text-2xl font-bold text-(--accent-color)" id="resultTitle"></h3>
                <p class="mt-2 opacity-80" id="resultScoreDisplay"></p>
            </div>

            <p class="text-sm opacity-60 mb-8">
                Note: This is a self-reporting screening tool and does not provide a medical diagnosis.
            </p>

            <button onclick="location.reload()" class="btn btn-secondary">Retake Test</button>
        </div>

    </div>
    
<script>
const e={project:"Depression_Test",title:"Depression level Test",instruction:"Choose the statement that feels like you..\n",save:{key:"${project}_${Age}_${Sex}-${UUID4}",upload_location:"/upload"},defaults:{score:[0,1,2,3],reverse:!1},fields:[{Age:!0},{Sex:!0}],logic:"sum",classification:{10:"These ups and downs are considered normal",16:"Mild mood disturbance",20:"Borderline clinical depression",30:"Moderate depression",40:"Severe depression",end:"Extreme depression"},questions:[{id:1,text:"How sad do you feel?",labels:["I do not feel sad.","I feel sad.","I am sad all the time and I can't snap out of it.","I am so sad and unhappy that I can't stand it."]},{id:2,text:"How do you feel when thinking about the future?",labels:["I am not particularly discouraged about the future.","I feel discouraged about the future.","I feel I have nothing to look forward to.","I feel the future is hopeless and that things cannot improve."]},{id:3,text:"How much do you feel you have succeded?",labels:["I do not feel like a failure.","I feel I have failed more than the average person.","As I look back on my life, all I can see is a lot of failures.","I feel I am a complete failure as a person."]},{id:4,text:"How much satisfaction do you get out of things?",labels:["I get as much satisfaction out of things as I used to.","I don't enjoy things the way I used to.","I don't get real satisfaction out of anything anymore.","I am dissatisfied or bored with everything."]},{id:5,text:"How guilty do you feel?",labels:["I don't feel particularly guilty.","I feel guilty a good part of the time.","I feel quite guilty most of the time.","I feel guilty all of the time."]},{id:6,text:"Do you feel you are being punished?",labels:["I don't feel I am being punished.","I feel I may be punished.","I expect to be punished.","I feel I am being punished."]},{id:7,text:"How do you feel about yourself?",labels:["I don't feel disappointed in myself.","I am disappointed in myself.","I am disgusted with myself.","I hate myself."]},{id:8,text:"How critical are you of yourself?",labels:["I don't feel I am any worse than anybody else.","I am critical of myself for my weaknesses or mistakes.","I blame myself all the time for my faults.","I blame myself for everything bad that happens."]},{id:9,text:"Do you have thoughts of harming yourself?",labels:["I don't have any thoughts of killing myself.","I have thoughts of killing myself, but I would not carry them out.","I would like to kill myself.","I would kill myself if I had the chance."]},{id:10,text:"How much do you cry?",labels:["I don't cry any more than usual.","I cry more now than I used to.","I cry all the time now.","I used to be able to cry, but now I can't cry even though I want to."]},{id:11,text:"Do you feel irritated?",labels:["I am no more irritated by things than I ever was.","I am slightly more irritated now than usual.","I am quite annoyed or irritated a good deal of the time.","I feel irritated all the time."]},{id:12,text:"How interested are you in other people?",labels:["I have not lost interest in other people.","I am less interested in other people than I used to be.","I have lost most of my interest in other people.","I have lost all of my interest in other people."]},{id:13,text:"How well do you make decisions?",labels:["I make decisions about as well as I ever could.","I put off making decisions more than I used to.","I have greater difficulty in making decisions more than I used to.","I can't make decisions at all anymore."]},{id:14,text:"Are you worried about your appearance?",labels:["I don't feel that I look any worse than I used to.","I am worried that I am looking old or unattractive.","I feel there are permanent changes in my appearance that make me look unattractive.","I believe that I look ugly."]},{id:15,text:"How well can you work?",labels:["I can work about as well as before.","It takes an extra effort to get started at doing something.","I have to push myself very hard to do anything.","I can't do any work at all."]},{id:16,text:"How well do you sleep?",labels:["I can sleep as well as usual.","I don't sleep as well as I used to.","I wake up 1-2 hours earlier than usual and find it hard to get back to sleep.","I wake up several hours earlier than I used to and cannot get back to sleep."]},{id:17,text:"How tired do you get?",labels:["I don't get more tired than usual.","I get tired more easily than I used to.","I get tired from doing almost anything.","I am too tired to do anything."]},{id:18,text:"Have you noticed changes in your appetite?",labels:["My appetite is no worse than usual.","My appetite is not as good as it used to be.","My appetite is much worse now.","I have no appetite at all anymore."]},{id:19,text:"Have you lost weight lately?",labels:["I haven't lost much weight, if any, lately.","I have lost more than five pounds.","I have lost more than ten pounds.","I have lost more than fifteen pounds."]},{id:20,text:"How worried are you about your health?",labels:["I am no more worried about my health than usual.","I am worried about physical problems like aches, pains, upset stomach, or constipation.","I am very worried about physical problems and it's hard to think of much else.","I am so worried about my physical problems that I cannot think of anything else."]},{id:21,text:"Have you noticed changes in your interest in sex?",labels:["I have not noticed any recent change in my interest in sex.","I am less interested in sex than I used to be.","I have almost no interest in sex.","I have lost interest in sex completely."]}]};let t=0,n={},o={};const a={introStep:document.getElementById("step-intro"),quizStep:document.getElementById("step-quiz"),resultStep:document.getElementById("step-result"),testTitle:document.getElementById("testTitle"),testInstruction:document.getElementById("testInstruction"),dynamicFields:document.getElementById("dynamicFields"),userForm:document.getElementById("userForm"),questionContainer:document.getElementById("questionContainer"),progressBar:document.getElementById("progressBar"),nextBtn:document.getElementById("nextBtn"),prevBtn:document.getElementById("prevBtn"),resultTitle:document.getElementById("resultTitle"),resultScoreDisplay:document.getElementById("resultScoreDisplay"),themeToggle:document.getElementById("themeToggle"),sunIcon:document.getElementById("sunIcon"),moonIcon:document.getElementById("moonIcon"),body:document.body};function s(){return crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function l(t,n,o){const a={[o]:n};return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(async n=>{if(n.ok)return console.log(`Success: Data saved with key: ${o}`),!0;if(412===n.status){if(o===e.project)return;return console.warn("Config missing. Uploading config..."),l(t,e,e.project)}return console.error("Server Error:",n.status,await n.text()),!1}).catch(e=>(console.error("Network Error:",e),!1))}a.userForm.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(a.userForm);for(let[e,n]of t.entries())o[e]=n;a.introStep.classList.add("hidden"),a.quizStep.classList.remove("hidden"),u()}),a.nextBtn.addEventListener("click",()=>{const i=e.questions[t],r=i.type||(e.defaults?e.defaults.type:"mcq")||"mcq";let d=null;if("mcq"===r){const e=document.querySelector('input[name="answer"]:checked');if(!e)return void alert("Please select an option.");d=isNaN(parseInt(e.value))?e.value:parseInt(e.value)}else if("number"===r){const e=document.getElementById("q-number-input");if(!e.value)return void alert("Please enter a number.");d=parseFloat(e.value)}else if("time"===r){const e=document.getElementById("q-time-input");if(!e.value)return void alert("Please enter a time.");d=e.value}n[i.id]=d,t<e.questions.length-1?(t++,u()):function(){a.quizStep.classList.add("hidden"),a.resultStep.classList.remove("hidden");let t=0;if(e.logic){let o=e.logic;if("sum"===o.toLowerCase())Object.values(n).forEach(e=>{"number"==typeof e&&(t+=e)});else try{const e=o.replace(/\$(\d+)/g,(e,t)=>{const o=n[t];return null==o?0:"string"==typeof o&&o.includes(":")?function(e){if(!e||"string"!=typeof e||!e.includes(":"))return 0;const[t,n]=e.split(":").map(Number);return t+n/60}(o):o});console.log("Evaluating:",e),t=new Function("return "+e)(),t=Math.round(100*t)/100}catch(e){console.error("Error parsing logic:",e),t=0,alert("Error calculating score. Please check console.")}}else Object.values(n).forEach(e=>{"number"==typeof e&&(t+=e)});const i=Object.keys(e.classification).sort((e,t)=>"end"===e?1:"end"===t?-1:parseInt(e)-parseInt(t));let r="";for(let n of i){if("end"===n){r=e.classification[n];break}if(t<=parseFloat(n)){r=e.classification[n];break}}if(a.resultTitle.textContent=r,a.resultScoreDisplay.textContent=`Total Score: ${t}`,e.save){key=function(t,n){let o=!1,a=t.replace(/\${(.*?)}/g,(t,a)=>{if("UUID4"===a.toUpperCase())return o=!0,s();if("project"===a.toLowerCase())return e.project;const l=n[a];return null!=l?String(l).trim():"unknown"});return o||(a+=`_${s()}`),a}(e.save.key,o);const a={project:e.project,timestamp:(new Date).toISOString(),details:o,answers:n,score:t,result:r};l(e.save.upload_location,a,key)}}()}),a.prevBtn.addEventListener("click",()=>{t>0&&(t--,u())});const i=localStorage.getItem("theme"),r=document.documentElement;function d(e){e?(sunIcon.classList.add("hidden"),moonIcon.classList.remove("hidden")):(sunIcon.classList.remove("hidden"),moonIcon.classList.add("hidden"))}function u(){const o=e.questions[t],s=e.questions.length,l=t/s*100;a.progressBar.style.width=`${l}%`,a.questionContainer.innerHTML="";const i=document.createElement("h2");i.className="text-xl mb-4",i.textContent=`${t+1}. ${o.text}`,a.questionContainer.appendChild(i);const r=o.type||(e.defaults?e.defaults.type:"mcq")||"mcq";if("mcq"===r){const t=o.labels||(e.defaults?e.defaults.labels:[]),s=e.defaults&&e.defaults.score?e.defaults.score:t.map((e,t)=>t);t.forEach((e,t)=>{const l=s[t],i=document.createElement("label");i.className="option-label";const r=document.createElement("input");r.type="radio",r.name="answer",r.value=l,n[o.id]===l&&(r.checked=!0,i.classList.add("selected")),r.addEventListener("change",()=>{document.querySelectorAll(".option-label").forEach(e=>e.classList.remove("selected")),i.classList.add("selected")});const d=document.createElement("span");d.textContent=e,i.appendChild(r),i.appendChild(d),a.questionContainer.appendChild(i)})}else if("number"===r){const e=document.createElement("input");e.type="number",e.id="q-number-input",e.className="w-full p-3 rounded border border-[var(--input-border)] bg-[var(--input-bg)] text-[var(--text-color)] mt-2",e.placeholder="Enter number...",void 0!==n[o.id]&&(e.value=n[o.id]),a.questionContainer.appendChild(e)}else if("time"===r){const e=document.createElement("input");e.type="time",e.id="q-time-input",e.value="00:00",e.className="w-full p-3 rounded border border-[var(--input-border)] bg-[var(--input-bg)] text-[var(--text-color)] mt-2",void 0!==n[o.id]&&(e.value=n[o.id]),a.questionContainer.appendChild(e)}0===t?a.prevBtn.classList.add("hidden"):a.prevBtn.classList.remove("hidden"),a.nextBtn.textContent=t===s-1?"Finish":"Next"}"light"===i?(r.classList.remove("dark"),d(!1)):(r.classList.add("dark"),d(!0)),a.themeToggle.addEventListener("click",()=>{a.body.classList.toggle("light");a.body.classList.contains("light")?(document.getElementById("moonIcon").classList.add("hidden"),document.getElementById("sunIcon").classList.remove("hidden"),localStorage.setItem("theme","light")):(document.getElementById("moonIcon").classList.remove("hidden"),document.getElementById("sunIcon").classList.add("hidden"),localStorage.setItem("theme","dark"))}),window.alert=function(e,t){let n="Empty Response",o="";void 0===t?o=e:(n=e,o=t);const a=document.createElement("div");a.className="\n        bg-yellow-100 \n        border-b-8 \n        min-w-min \n        w-auto \n        max-w-sm\n        border-yellow-400 \n        text-yellow-700 \n        p-4 \n        animate-bounce \n        fixed \n        top-5 \n        left-5 \n        z-50 \n        shadow-lg \n        rounded\n    ".replace(/\s+/g," "),a.setAttribute("role","alert"),a.innerHTML=`\n      <p class="font-bold">${n}</p>\n      <p>${o}</p>\n    `,document.body.appendChild(a),setTimeout(()=>{a.remove()},1e3)},document.title=e.title,a.testTitle.textContent=e.title,a.testInstruction.textContent=e.instruction,a.testInstruction.style.whiteSpace="pre-line",e.fields&&e.fields.forEach(e=>{const t=Object.keys(e)[0],n=e[t],o=document.createElement("div");o.className="form-group";const s=document.createElement("label");if(s.textContent=t,n){const e=document.createElement("span");e.className="text-red-500 ml-1",e.textContent="*";const t=document.createElement("span");t.className="sr-only",t.textContent=" (Required Field)",s.appendChild(e),s.appendChild(t)}let l;o.appendChild(s),"sex"===t.toLowerCase()||"gender"===t.toLowerCase()?(l=document.createElement("select"),l.style.padding="0.75rem",l.innerHTML='\n                    <option value="" disabled selected>Select...</option>\n                    <option value="Male">Male</option>\n                    <option value="Female">Female</option>\n                    <option value="Other">Other</option>\n                '):"age"===t.toLowerCase()?(l=document.createElement("input"),l.type="number",l.min=1,l.max=127):(l=document.createElement("input"),l.type="text"),l.name=t,n&&(l.required=!0),o.appendChild(l),a.dynamicFields.appendChild(o)}),"undefined"!=typeof lucide&&lucide.createIcons();
</script>
</body>
</html>