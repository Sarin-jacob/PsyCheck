<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <!-- Inter Font -->
     
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">
    <script src="https://unpkg.com/lucide@latest"></script>


<style>
/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-border-style:solid;--tw-font-weight:initial;--tw-tracking:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-500:oklch(63.7% .237 25.331);--color-yellow-100:oklch(97.3% .071 103.193);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-700:oklch(55.4% .135 66.442);--spacing:.25rem;--container-sm:24rem;--container-2xl:42rem;--container-7xl:80rem;--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height:calc(2.25/1.875);--font-weight-semibold:600;--font-weight-bold:700;--tracking-tight:-.025em;--tracking-wider:.05em;--tracking-widest:.1em;--radius-xl:.75rem;--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-bounce:bounce 1s infinite;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab, red, red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.sr-only{clip-path:inset(50%);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.fixed{position:fixed}.top-5{top:calc(var(--spacing)*5)}.right-5{right:calc(var(--spacing)*5)}.left-5{left:calc(var(--spacing)*5)}.z-50{z-index:50}.container{width:100%}@media (min-width:40rem){.container{max-width:40rem}}@media (min-width:48rem){.container{max-width:48rem}}@media (min-width:64rem){.container{max-width:64rem}}@media (min-width:80rem){.container{max-width:80rem}}@media (min-width:96rem){.container{max-width:96rem}}.mx-2{margin-inline:calc(var(--spacing)*2)}.mx-auto{margin-inline:auto}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-\[10vh\]{margin-top:10vh}.-mb-8{margin-bottom:calc(var(--spacing)*-8)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.mb-10{margin-bottom:calc(var(--spacing)*10)}.ml-1{margin-left:calc(var(--spacing)*1)}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.table{display:table}.h-5{height:calc(var(--spacing)*5)}.h-8{height:calc(var(--spacing)*8)}.h-16{height:calc(var(--spacing)*16)}.min-h-screen{min-height:100vh}.w-5{width:calc(var(--spacing)*5)}.w-8{width:calc(var(--spacing)*8)}.w-16{width:calc(var(--spacing)*16)}.w-100{width:calc(var(--spacing)*100)}.w-auto{width:auto}.w-full{width:100%}.max-w-2xl{max-width:var(--container-2xl)}.max-w-7xl{max-width:var(--container-7xl)}.max-w-sm{max-width:var(--container-sm)}.min-w-min{min-width:min-content}.flex-grow{flex-grow:1}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-bounce{animation:var(--animate-bounce)}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.gap-2{gap:calc(var(--spacing)*2)}.gap-6{gap:calc(var(--spacing)*6)}.gap-8{gap:calc(var(--spacing)*8)}.self-center{align-self:center}.scroll-smooth{scroll-behavior:smooth}.rounded{border-radius:.25rem}.rounded-\(--border-radius\),.rounded-\[var\(--border-radius\)\]{border-radius:var(--border-radius)}.rounded-full{border-radius:3.40282e38px}.rounded-xl{border-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-b-8{border-bottom-style:var(--tw-border-style);border-bottom-width:8px}.border-\(--accent-color\){border-color:var(--accent-color)}.border-\(--input-border\),.border-\[var\(--input-border\)\]{border-color:var(--input-border)}.border-yellow-400{border-color:var(--color-yellow-400)}.bg-\(--input-bg\),.bg-\[var\(--input-bg\)\]{background-color:var(--input-bg)}.bg-yellow-100{background-color:var(--color-yellow-100)}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.px-6{padding-inline:calc(var(--spacing)*6)}.py-3{padding-block:calc(var(--spacing)*3)}.py-6{padding-block:calc(var(--spacing)*6)}.py-16{padding-block:calc(var(--spacing)*16)}.text-center{text-align:center}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-tight{--tw-tracking:var(--tracking-tight);letter-spacing:var(--tracking-tight)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.tracking-widest{--tw-tracking:var(--tracking-widest);letter-spacing:var(--tracking-widest)}.text-\(--accent-color\){color:var(--accent-color)}.text-\[var\(--text-color\)\]{color:var(--text-color)}.text-red-500{color:var(--color-red-500)}.text-yellow-700{color:var(--color-yellow-700)}.uppercase{text-transform:uppercase}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-80{opacity:.8}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-300{--tw-duration:.3s;transition-duration:.3s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}@media (min-width:48rem){.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\:px-12{padding-inline:calc(var(--spacing)*12)}.md\:text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.md\:text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.md\:text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}}}:root{--font-family:"Inter",sans-serif;--border-radius:10px;--transition-speed:.28s;--bg-color:#121212;--text-color:#e0e0e0;--sidebar-bg:#1e1e1e;--sidebar-border:#333;--input-bg:#2c2c2c;--input-border:#444;--input-text:#e0e0e0;--button-bg:#333;--button-text:#e0e0e0;--accent-color:#14b8a6;--shadow-color:#00000038}body.light{--bg-color:#f4f4f5;--text-color:#18181b;--sidebar-bg:#fff;--sidebar-border:#e4e4e7;--input-bg:#fff;--input-border:#d4d4d8;--input-text:#18181b;--button-bg:#e4e4e7;--button-text:#18181b;--accent-color:#0d9488;--shadow-color:#0000001a}body{background-color:var(--bg-color);color:var(--text-color);font-family:var(--font-family);transition:background-color var(--transition-speed),color var(--transition-speed);flex-direction:column;align-items:center;min-height:100vh;padding:20px;display:flex}.card{background-color:var(--sidebar-bg);border:1px solid var(--sidebar-border);border-radius:var(--border-radius);box-shadow:0 4px 6px var(--shadow-color);width:100%;max-width:600px;transition:all var(--transition-speed);padding:2rem}h1,h2,h3{margin-bottom:1rem;font-weight:600}.form-group{margin-bottom:1.5rem}label{opacity:.9;margin-bottom:.5rem;font-size:.9rem;font-weight:500;display:block}input[type=text],input[type=number],select{background-color:var(--input-bg);border:1px solid var(--input-border);width:100%;color:var(--input-text);border-radius:var(--border-radius);transition:border-color var(--transition-speed);box-sizing:border-box;outline:none;padding:.75rem}input:focus,select:focus{border-color:var(--accent-color)}.btn{background-color:var(--accent-color);color:#fff;border-radius:var(--border-radius);cursor:pointer;border:none;padding:.75rem 1.5rem;font-weight:500;transition:opacity .2s}.btn:hover{opacity:.9}.btn-secondary{background-color:var(--button-bg);color:var(--button-text)}.option-label{background-color:var(--input-bg);border:1px solid var(--input-border);border-radius:var(--border-radius);cursor:pointer;align-items:center;margin-bottom:.75rem;padding:1rem;transition:all .2s;display:flex}.option-label:hover{border-color:var(--accent-color)}.option-label input[type=radio]{accent-color:var(--accent-color);margin-right:1rem;transform:scale(1.2)}.option-label.selected{border-color:var(--accent-color);background-color:#3b82f61a}.progress-container{background-color:var(--input-border);border-radius:999px;width:100%;height:6px;margin-bottom:2rem;overflow:hidden}.progress-bar{background-color:var(--accent-color);height:100%;transition:width .3s}.hidden{display:none}.fade-in{animation:.4s ease-in-out fadeIn}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.theme-toggle{background:var(--sidebar-bg);border:1px solid var(--sidebar-border);color:var(--text-color);cursor:pointer;box-shadow:0 2px 10px var(--shadow-color);z-index:50;border-radius:50%;padding:10px;position:fixed;top:20px;right:20px}.home-button{background:var(--sidebar-bg);border:1px solid var(--sidebar-border);color:var(--text-color);cursor:pointer;box-shadow:0 2px 10px var(--shadow-color);z-index:50;border-radius:50%;padding:10px;position:fixed;top:20px;left:20px}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@keyframes bounce{0%,to{animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}
</style>
</head>
<body class="light">

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle Theme">
        <i data-lucide="sun" class="hidden" id="sunIcon"></i>
        <i data-lucide="moon" id="moonIcon"></i>
    </button>

    <button class="home-button" aria-label="Home" onclick="window.location.href='./'">
        <i data-lucide="house-heart"></i>
    </button>

    <div class="w-full max-w-2xl flex flex-col gap-6 mt-[10vh]" id="app">
        
        <!-- STEP 1: INTRO & USER DETAILS -->
        <div id="step-intro" class="card self-center fade-in">
            <h1 class="text-2xl md:text-3xl text-center" id="testTitle">Loading...</h1>
            <p class="text-center opacity-80 mb-8" id="testInstruction"></p>
            
            <form id="userForm">
                <div id="dynamicFields"></div>
                <button type="submit" class="btn w-full mt-4">Start Assessment</button>
            </form>
        </div>

        <!-- STEP 2: QUESTIONS -->
        <div id="step-quiz" class="card hidden">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            
            <div id="questionContainer" class="fade-in">
                <!-- Content injected by JS -->
            </div>

            <div class="flex justify-between mt-6">
                <button id="prevBtn" class="btn btn-secondary w-auto hidden">Previous</button>
                <!-- Spacer if prev hidden -->
                <div id="spacer"></div> 
                <button id="nextBtn" class="btn w-auto">Next</button>
            </div>
        </div>

        <!-- STEP 3: RESULTS -->
        <div id="step-result" class="card hidden fade-in text-center">
            <div class="mb-6">
                <i data-lucide="activity" class="w-16 h-16 mx-auto text-(--accent-color) mb-4"></i>
                <h2 class="text-3xl">Assessment Complete</h2>
            </div>
            
            <div class="bg-(--input-bg) p-6 rounded-(--border-radius) border border-(--input-border) mb-6">
                <p class="text-sm opacity-70 uppercase tracking-wider mb-2">Your Result</p>
                <h3 class="text-2xl font-bold text-(--accent-color)" id="resultTitle"></h3>
                <p class="mt-2 opacity-80" id="resultScoreDisplay"></p>
            </div>

            <p class="text-sm opacity-60 mb-8">
                Note: This is a self-reporting screening tool and does not provide a medical diagnosis.
            </p>

            <button onclick="location.reload()" class="btn btn-secondary">Retake Test</button>
        </div>

    </div>
    
<script>
const e={project:"Sleep_Test",title:"Sleep Quality Test",instruction:"Choose the statement that feels like you..\n",save:{key:"${project}<em>${Age}</em>${Sex}-${UUID4}",upload_location:"./upload"},defaults:{score:[0,1,2,3],reverse:!1,type:"mcq",labels:["Not during past month","Less than once a week","Once or twice a week","Three or more times a week"]},fields:[{Age:!0},{Sex:!0}],classification:{4:"Normal Quality of Sleep",end:"Poor Quality of Sleep"},questions:[{id:1,text:"When have you usually gone to bed?",type:"time"},{id:2,text:"How long (in minutes) has it taken you to fall asleep each night?",type:"number"},{id:3,type:"time",text:"What time have you usually gotten up in the morning?"},{id:4,type:"number",text:"How many hours of actual sleep did you get at night?"},{id:5,text:"During the past month, how often have you had trouble sleeping because <em>you <strong>cannot</strong> get to sleep within 30 minutes</em>"},{id:6,text:"During the past month, how often have you had trouble sleeping because <em>you <strong>wake up</strong> in the middle of the night or early morning</em>"},{id:7,text:"During the past month, how often have you had trouble sleeping because <em>you have to get up to use the bathroom</em>"},{id:8,text:"During the past month, how often have you had trouble sleeping because <em>you <strong>cannot</strong> breathe comfortably</em>"},{id:9,text:"During the past month, how often have you had trouble sleeping because <em>you cough or snore loudly</em>"},{id:10,text:"During the past month, how often have you had trouble sleeping because <em>you feel too <strong>cold</strong></em>"},{id:11,text:"During the past month, how often have you had trouble sleeping because <em>you feel too <strong>hot</strong></em>"},{id:12,text:"During the past month, how often have you had trouble sleeping because <em>you have bad dreams</em>"},{id:13,text:"During the past month, how often have you had trouble sleeping because <em>you have pain</em>"},{id:14,text:"During the past month, how often have you had trouble sleeping because of other reason"},{id:15,text:"During the past month, how often have you taken medicine (prescribed or “over the counter”) to help you sleep?"},{id:16,text:"During the past month, how often have you had trouble staying awake while driving, eating meals, or engaging in social activity?"},{id:17,text:"During the past month, how much of a problem has it been for you to keep up enthusiasm to get things done?",labels:["No problem","Only a very slight problem","Somewhat of a problem","a very big problem"]},{id:18,text:"During the past month, how would you rate your sleep quality overall?",labels:["Very Good","Fairly Good","Fairly Bad","Very Bad"]}]};function t(e){const t=t=>{let n=e[t];if(null==n)return 0;if("string"==typeof n&&n.includes(":")){const[e,t]=n.split(":").map(Number);return e+t/60}return Number(n)||0};try{return t("18")+Math.ceil(((t("2")<16?0:t("2")<31?1:t("2")<61?2:3)+t("5"))/2)+(t("4")>=7?0:t("4")>=6?1:t("4")>=5?2:3)+(t("4")/(t("3")-t("1"))*100>=85?0:t("4")/(t("3")-t("1"))*100>=75?1:t("4")/(t("3")-t("1"))*100>=65?2:3)+(t("6")+t("7")+t("8")+t("9")+t("10")+t("11")+t("12")+t("13")+t("14")<1?0:t("6")+t("7")+t("8")+t("9")+t("10")+t("11")+t("12")+t("13")+t("14")<10?1:t("6")+t("7")+t("8")+t("9")+t("10")+t("11")+t("12")+t("13")+t("14")<19?2:3)+t("15")+(t("17")+t("16")<1?0:t("17")+t("16")<3?1:t("17")+t("16")<5?2:3)}catch(e){return console.error("Logic Error:",e),0}}let n=0,o={},s={};const a={introStep:document.getElementById("step-intro"),quizStep:document.getElementById("step-quiz"),resultStep:document.getElementById("step-result"),testTitle:document.getElementById("testTitle"),testInstruction:document.getElementById("testInstruction"),dynamicFields:document.getElementById("dynamicFields"),userForm:document.getElementById("userForm"),questionContainer:document.getElementById("questionContainer"),progressBar:document.getElementById("progressBar"),nextBtn:document.getElementById("nextBtn"),prevBtn:document.getElementById("prevBtn"),resultTitle:document.getElementById("resultTitle"),resultScoreDisplay:document.getElementById("resultScoreDisplay"),themeToggle:document.getElementById("themeToggle"),sunIcon:document.getElementById("sunIcon"),moonIcon:document.getElementById("moonIcon"),body:document.body};function i(){return crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function r(n,o,s){const a={[s]:o};return fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(async a=>{if(a.ok)return!0;if(412===a.status){if(s===e.project)return;const a={quiz:e,logic:t.toString()};return r(n,a,e.project).then(e=>!!e&&r(n,o,s))}return!1}).catch(e=>!1)}function l(){const t=e.questions[n],s=e.questions.length,i=n/s*100;a.progressBar.style.width=`${i}%`,a.questionContainer.innerHTML="";const r=document.createElement("h2");r.className="text-xl mb-4",r.innerHTML=`${n+1}. ${t.text||e.defaults.text||""}`,a.questionContainer.appendChild(r);const l=t.type||(e.defaults?e.defaults.type:"mcq")||"mcq";if("mcq"===l){const n=t.labels||(e.defaults?e.defaults.labels:[]),s=t.score?t.score:t.reverse?e.defaults.score.slice().reverse():e.defaults.score;n.forEach((e,n)=>{const i=s[n],r=document.createElement("label");r.className="option-label";const l=document.createElement("input");l.type="radio",l.name="answer",l.value=i,o[t.id]===i&&(l.checked=!0,r.classList.add("selected")),l.addEventListener("change",()=>{document.querySelectorAll(".option-label").forEach(e=>e.classList.remove("selected")),r.classList.add("selected")});const d=document.createElement("span");d.textContent=e,r.appendChild(l),r.appendChild(d),a.questionContainer.appendChild(r)})}else if("number"===l){const e=document.createElement("input");e.type="number",e.id="q-number-input",e.className="w-full p-3 rounded border border-[var(--input-border)] bg-[var(--input-bg)] text-[var(--text-color)] mt-2",e.placeholder="Enter number...",void 0!==o[t.id]&&(e.value=o[t.id]),a.questionContainer.appendChild(e)}else if("time"===l){const e=document.createElement("input");e.type="time",e.id="q-time-input",e.value="00:00",e.className="w-full p-3 rounded border border-[var(--input-border)] bg-[var(--input-bg)] text-[var(--text-color)] mt-2",void 0!==o[t.id]&&(e.value=o[t.id]),a.questionContainer.appendChild(e)}0===n?a.prevBtn.classList.add("hidden"):a.prevBtn.classList.remove("hidden"),a.nextBtn.textContent=n===s-1?"Finish":"Next"}a.userForm.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(a.userForm);for(let[e,n]of t.entries())s[e]=n;a.introStep.classList.add("hidden"),a.quizStep.classList.remove("hidden"),l()}),a.nextBtn.addEventListener("click",()=>{const d=e.questions[n],u=d.type||(e.defaults?e.defaults.type:"mcq")||"mcq";let c=null;if("mcq"===u){const e=document.querySelector('input[name="answer"]:checked');if(!e)return void alert("Please select an option.");c=isNaN(parseInt(e.value))?e.value:parseInt(e.value)}else if("number"===u){const e=document.getElementById("q-number-input");if(!e.value)return void alert("Please enter a number.");c=parseFloat(e.value)}else if("time"===u){const e=document.getElementById("q-time-input");if(!e.value)return void alert("Please enter a time.");c=e.value}o[d.id]=c,n<e.questions.length-1?(n++,l()):function(){a.quizStep.classList.add("hidden"),a.resultStep.classList.remove("hidden");let n=0;n=t(o),n=Math.round(100*n)/100;const l=Object.keys(e.classification).sort((e,t)=>"end"===e?1:"end"===t?-1:parseInt(e)-parseInt(t));let d="";for(let t of l){if("end"===t){d=e.classification[t];break}if(n<=parseFloat(t)){d=e.classification[t];break}}if(a.resultTitle.textContent=d,a.resultScoreDisplay.textContent=`Total Score: ${n}`,e.save){key=function(t,n){let o=!1,s=t.replace(/\${(.*?)}/g,(t,s)=>{if("UUID4"===s.toUpperCase())return o=!0,i();if("project"===s.toLowerCase())return e.project;const a=n[s];return null!=a?String(a).trim():"unknown"});return o||(s+=`_${i()}`),s}(e.save.key,s);const t={project:e.project,timestamp:(new Date).toISOString(),details:s,answers:o,score:n,result:d};r(e.save.upload_location,t,key)}}()}),a.prevBtn.addEventListener("click",()=>{n>0&&(n--,l())}),window.onload=()=>{"light"===localStorage.getItem("theme")?(a.body.classList.add("light"),document.getElementById("moonIcon").classList.remove("hidden"),document.getElementById("sunIcon").classList.add("hidden")):(a.body.classList.remove("light"),document.getElementById("moonIcon").classList.add("hidden"),document.getElementById("sunIcon").classList.remove("hidden"))},a.themeToggle.addEventListener("click",()=>{a.body.classList.toggle("light");a.body.classList.contains("light")?(document.getElementById("moonIcon").classList.remove("hidden"),document.getElementById("sunIcon").classList.add("hidden"),localStorage.setItem("theme","light")):(document.getElementById("moonIcon").classList.add("hidden"),document.getElementById("sunIcon").classList.remove("hidden"),localStorage.setItem("theme","dark"))}),window.alert=function(e,t){let n="Empty Response",o="";void 0===t?o=e:(n=e,o=t);const s=document.createElement("div");s.className="\n        bg-yellow-100 \n        border-b-8 \n        min-w-min \n        w-auto \n        max-w-sm\n        border-yellow-400 \n        text-yellow-700 \n        p-4 \n        animate-bounce \n        fixed \n        top-5 \n        left-5 \n        z-50 \n        shadow-lg \n        rounded\n    ".replace(/\s+/g," "),s.setAttribute("role","alert"),s.innerHTML=`\n      <p class="font-bold">${n}</p>\n      <p>${o}</p>\n    `,document.body.appendChild(s),setTimeout(()=>{s.remove()},1e3)},document.title=e.title,a.testTitle.textContent=e.title,a.testInstruction.innerHTML=e.instruction,a.testInstruction.style.whiteSpace="pre-line",e.fields&&e.fields.forEach(e=>{const t=Object.keys(e)[0],n=e[t],o=document.createElement("div");o.className="form-group";const s=document.createElement("label");if(s.textContent=t,n){const e=document.createElement("span");e.className="text-red-500 ml-1",e.textContent="*";const t=document.createElement("span");t.className="sr-only",t.textContent=" (Required Field)",s.appendChild(e),s.appendChild(t)}let i;o.appendChild(s),"sex"===t.toLowerCase()||"gender"===t.toLowerCase()?(i=document.createElement("select"),i.style.padding="0.75rem",i.innerHTML='\n                    <option value="" disabled selected>Select...</option>\n                    <option value="Male">Male</option>\n                    <option value="Female">Female</option>\n                    <option value="Other">Other</option>\n                '):"age"===t.toLowerCase()?(i=document.createElement("input"),i.type="number",i.min=1,i.max=127):(i=document.createElement("input"),i.type="text"),i.name=t,n&&(i.required=!0),o.appendChild(i),a.dynamicFields.appendChild(o)}),"undefined"!=typeof lucide&&lucide.createIcons();
</script>
</body>
</html>